<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Browser</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-200">
    <div x-data="appState()">
        <div x-data="imageBrowser"  class="container mx-auto px-4 py-5">
            <div x-show="focusedImage" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-75 flex items-center justify-center z-50" @click.away="focusedImage = null">
                <img :src="focusedImage?.url" class="max-w-full max-h-full p-4">
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 3xl:grid-cols-8 gap-4">
                <template x-for="image in images" :key="image.id">
                    <div @click="focusImage(image)" class="cursor-pointer">
                        <img :src="image.url" class="w-full h-auto">
                    </div>
                </template>
            </div>

            <div class="flex justify-center mt-4">
                <button @click="next" :disabled="currentPage >= totalPage" class="px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50">Next</button>
            </div>
        </div>

        <script type="module">

            import ImageBrowserExtension from './main.js';
            let ext = new ImageBrowserExtension('',20)
            await ext.ready()
            document.addEventListener('alpine:init', () => {
                Alpine.data('appState',  () => ({
                    imageBrowser: ext
                }))
            })
            Alpine.start();
        </script>
    </div>
</body>
</html>
